#reader,
#qr-reader {
  width: 100%;
  max-width: 600px;
  margin: 0 auto;
  border-radius: 12px;
  overflow: hidden;
  background: #000;
  position: relative;
  aspect-ratio: 16 / 9;
}
#reader video, #reader canvas,
#qr-reader video, #qr-reader canvas {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  -webkit-touch-callout: none;
}

/* iOS layout helper */
@supports (-webkit-touch-callout: none) {
  .ios-nowrap-row { flex-wrap: nowrap !important; }
  .ios-nowrap-row > * { white-space: nowrap; }
  #openBackdateHistory { min-width: 132px; }
}
@media (max-width: 430px) {
  .ios-nowrap-row { flex-wrap: nowrap; }
  #openBackdateHistory { min-width: 132px; }
}

/* Dropdown custom */
.dropdown-enter { opacity: 0; transform: scale(0.97); }
.dropdown-enter-active { opacity: 1; transform: scale(0.97); transition: opacity .12s ease, transform .12s ease; }
.dropdown-leave-active { opacity: 0; transform: scale(0.97); transition: opacity .12s ease, transform .12s ease; }
.dd-opt-focus { background-color: rgb(240 253 244); }
.dd-scroll { max-height: 14rem; overflow: auto; -webkit-overflow-scrolling: touch; }
.hidden-native-select { position:absolute; inset:auto 0 0 auto; width:0; height:0; opacity:0; pointer-events:none; }

/* Overlay Loading (scan) */
#overlay.hidden { display: none; }
#overlay { backdrop-filter: blur(1px); }

/* Overlay Loading (scan) – animated */
#overlay.hidden { display: none; }
#overlay { backdrop-filter: blur(1px); }

/* Scoped hanya di overlay */
#overlay .overlay-card { animation: overlayPop .20s ease-out both; }
/* --- Langkah 2: Ganti juga aturan animasi pada logo --- */
#overlay .overlay-logo-spin {
  /* Menggunakan durasi dan timing function yang lebih halus */
  animation: logoPulse 2.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  
  will-change: transform; 
}
#overlay .bob { animation: bob 2.6s ease-in-out infinite; transform-origin: center; }

#overlay .overlay-bar { position: relative; overflow: hidden; }
/* Ini adalah kode BARU dengan 3 blok warna solid */
#overlay .overlay-bar > i {
  position: absolute; left: -40%; top: 0; width: 40%; height: 100%;
  
  /* --- PERUBAHAN UTAMA DI SINI --- */
  /* Membuat 3 blok warna solid dengan hard-stop gradient */
  background-image: linear-gradient(
    to right,
    #10B981 0%, #10B981 33.33%,       /* Blok 1: Hijau */
    #06B6D4 33.33%, #06B6D4 66.66%,  /* Blok 2: Cyan */
    #3B82F6 66.66%, #3B82F6 100%     /* Blok 3: Biru */
  );
  
  /* Hanya menggunakan animasi pergerakan saja */
  animation: indeterminate 1.1s cubic-bezier(.4,0,.2,1) infinite;

  border-radius: 9999px;
}

/* Keyframes */
@keyframes logoSpin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }
@keyframes bob { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-3px) } }
@keyframes indeterminate { from { left: -40% } to { left: 100% } }
@keyframes overlayPop { from { transform: translateY(2px) scale(.98); opacity: 0 } to { transform: none; opacity: 1 } }

/* Hormati preferensi user */
@media (prefers-reduced-motion: reduce) {
  #overlay .overlay-card,
  #overlay .overlay-logo-spin,
  #overlay .bob,
  #overlay .overlay-bar > i { animation: none !important; }
}

/* --- Header WC/Plant: tetap sejajar tanpa melebar --- */
.ios-nowrap-row > * { white-space: normal !important; } /* izinkan label di-truncate */
.ios-nowrap-row .min-w-0 { min-width: 0; }              /* agar flex child boleh mengecil */
#openBackdateHistory { min-width: 0 !important; }       /* hapus lebar minimum lama */

@media (max-width: 430px) {
  #openBackdateHistory { max-width: 50% !important; }   /* tombol tak “mengalahkan” label */
}

/* === Welcome Marquee (sapaan selamat datang) === */
.welcome-marquee{
  position: relative;
  overflow: hidden;
}
.welcome-track{
  display: inline-block;
  white-space: nowrap;
  will-change: transform;
  animation: welcome-scroll 10s linear infinite;
  color: #fff; /* teks di header gradasi */
}

/* efek fade di kiri/kanan biar mulus */
.welcome-marquee::before,
.welcome-marquee::after{
  content: "";
  position: absolute;
  top: 0; bottom: 0;
  width: 64px;
  pointer-events: none;
}
.welcome-marquee::before{
  left: 0;
  background: linear-gradient(to right, rgba(0,0,0,.12), rgba(0,0,0,0));
}
.welcome-marquee::after{
  right: 0;
  background: linear-gradient(to left, rgba(0,0,0,.12), rgba(0,0,0,0));
}

/* keyframes: karena konten diduplikasi 2x, geser -50% untuk loop mulus */
@keyframes welcome-scroll{
  from { transform: translateX(0); }
  to   { transform: translateX(-50%); }
}

/* aksesibilitas: hormati preferensi reduce motion */
@media (prefers-reduced-motion: reduce){
  .welcome-track{ animation: none; }
}

/* --- Langkah 1: Ganti @keyframes yang lama dengan versi baru ini --- */
@keyframes logoPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    /* Dibuat lebih menonjol dengan skala yang lebih besar */
    transform: scale(1.15); 
    opacity: 0.9;
  }
}

/* ======================================================= */
/* === Animasi Logo Modern (Orbit 3D + Denyut)         === */
/* (Versi 4.4 - Multi-Warna)                         */
/* ======================================================= */

/* 1. Styling untuk pembungkus (tidak ada perubahan) */
.logo-wrapper {
  width: 40px;
  height: 40px;
  margin-left: auto;
  margin-right: auto;
  position: relative;
  perspective: 250px;
}

/* 2. Garis orbit 3D */
.logo-wrapper::before {
  content: '';
  position: absolute;
  
  top: -8px;
  left: -8px;
  right: -8px;
  bottom: -8px;
  
  /* --- DIUBAH --- */
  /* Menggunakan 3 warna berbeda dari palet hijau-biru */
  background: conic-gradient(
    from 90deg,
    #10B981 0deg 50deg,     /* Warna 1: Hijau Emerald */
    transparent 50deg 120deg,
    #06B6D4 120deg 170deg,  /* Warna 2: Biru Cyan */
    transparent 170deg 240deg,
    #3B82F6 240deg 290deg,  /* Warna 3: Biru Terang */
    transparent 290deg 360deg
  );
  
  animation: orbit 4s ease-in-out infinite;
  border-radius: 50%;
  
  -webkit-mask: radial-gradient(circle at center, transparent 23px, black 28px);
  mask: radial-gradient(circle at center, transparent 23px, black 28px);
  
  z-index: 2;
}

/* 3. Definisikan animasi 'orbit' 3D (tidak ada perubahan) */
@keyframes orbit {
  0% {
    transform: rotateX(75deg) rotateY(-20deg) rotateZ(0deg);
    opacity: 0.8;
  }
  50% {
    transform: rotateX(75deg) rotateY(20deg) rotateZ(360deg);
    opacity: 1;
  }
  100% {
    transform: rotateX(75deg) rotateY(-20deg) rotateZ(720deg);
    opacity: 0.8;
  }
}

/* 4. Animasi denyut pada gambar logo (tidak ada perubahan) */
.logo-wrapper img {
  animation: logoPulse 2.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  border-radius: 50%;
  object-fit: cover;
  width: 100%;
  height: 100%;
  position: relative; 
  z-index: 1;
}

/* 5. Hapus animasi spin yang lama jika masih ada */
@keyframes spin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

/* 6. Aturan untuk selector lama (tidak ada perubahan) */
#overlay .overlay-logo-spin {
  animation: none;
}

/* Tambahkan keyframes baru ini di bagian bawah file */
@keyframes colorShift {
  from { background-position: 100% 0; }
  to   { background-position: -100% 0; }
}